<!-- SHEEEEEESH -->
<!DOCTYPE html>
<html lang="no-NB">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>How-We-Roll</title>
		<link rel="stylesheet" href="assets/css/base.css">
        <link rel="stylesheet" href="assets/css/rapport.css">
        <link rel="icon" href="assets/img/favicon.png">
	</head>
	<body>
		<nav>
            <div id="navbar">
                <h1 id="PrimaryTitle">How-We-Roll</h1>
                <ul>
                    <li><a href="index.html">Forside</a></li>
                    <li><a href="personlighetstest.html">Personlighettest</a></li>
                    <li><a href="rapport.html">Rapport</a></li>
                </ul>
			</div>
		</nav>
        <div class="main-content">
            <h2>How-we-roll rapport</h2>
            <p>Her er en visuell fremstilling av gruppe 8A sine innmeldinger i skjema "HowWeRoll". Vi har benyttet SVG-elementer for å vise dataene fra gruppen. </p>
            <p id='localstorage-tekst'></p>
            <h4>Når jobber du best?</h4>
            <svg xmlns="http://www.w3.org/2000/svg" height="75" width="1100" id="hours-svg" style='border: 1px solid black;'>
                <line x1="550" y1="30" x2="550" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" /> <!--Linjene i rapport vinduene-->
                <line x1="50" y1="30" x2="50" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                <line x1="1050" y1="30" x2="1050" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                <rect width="1100px" height="30px" fill="#264653"/>
                <g font-size="15" font-family="sans-serif" fill="#e76f51" stroke="none">
                    <text x="10" y="20" dx="0">MORGENFUGL</text>
                    <text x="515" y="20" dx="0">NØYTRAL</text>
                    <text x="1000" y="20" dx="0">NATTERAVN</text>
                </g>
            </svg>
            <br>
            <h4>Hvor aktiv er du?</h4>
            <svg xmlns="http://www.w3.org/2000/svg" height="75" width="1100" id="akt-svg" style='border: 1px solid black;'>
              
              <line x1="550" y1="30" x2="550" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                <line x1="50" y1="30" x2="50" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                  <line x1="1050" y1="30" x2="1050" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                    <rect width="1100px" height="30px" fill="#264653"/>
                    <g font-size="15" font-family="sans-serif" fill="#e76f51" stroke="none">
                      <text x="10" y="20" dx="0">SOFAGRIS</text>
                      <text x="515" y="20" dx="0">NØYTRAL</text>
                      <text x="1000" y="20" dx="0">ATLETISK</text>
                    </g>
            </svg>
            <br>
            <h4>Hvordan foretrekker du å jobbe?</h4>
            <svg xmlns="http://www.w3.org/2000/svg" height="75" width="1100" id="work-svg" style='border: 1px solid black;'>
              
              <line x1="550" y1="30" x2="550" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                <line x1="50" y1="30" x2="50" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                  <line x1="1050" y1="30" x2="1050" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                    <rect width="1100px" height="30px" fill="#264653"/>
                    <g font-size="15" font-family="sans-serif" fill="#e76f51" stroke="none">
                      <text x="10" y="20" dx="0">SELVSTENDIG</text>
                      <text x="515" y="20" dx="0">NØYTRAL</text>
                      <text x="1000" y="20" dx="0">SAMARBEID</text>
                    </g>
            </svg>
            <br>
            <h4>Foretrekker du hjemmekontor eller fysisk oppmøte?</h4>
            <svg xmlns="http://www.w3.org/2000/svg" height="75" width="1100" id="dify-svg" style='border: 1px solid black;'>
              
              <line x1="550" y1="30" x2="550" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                <line x1="50" y1="30" x2="50" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                  <line x1="1050" y1="30" x2="1050" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                    <rect width="1100px" height="30px" fill="#264653"/>
                    <g font-size="15" font-family="sans-serif" fill="#e76f51" stroke="none">
                      <text x="10" y="20" dx="0">HJEMMEKONTOR</text>
                      <text x="515" y="20" dx="0">NØYTRAL</text>
                      <text x="1000" y="20" dx="0">FYSISK</text>
                    </g>
            </svg>
            <br>
            <h4>Foretrekker du å fortelle bakgrunnshistorie eller gå rett på sak?</h4>
            <svg xmlns="http://www.w3.org/2000/svg" height="75" width="1100" id="bgrp-svg" style='border: 1px solid black;'>
              
              <line x1="550" y1="30" x2="550" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                <line x1="50" y1="30" x2="50" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                  <line x1="1050" y1="30" x2="1050" y2="1000" style="stroke:rgb(42,157,144);stroke-width:2" />
                    <rect width="1100px" height="30px" fill="#264653"/>
                    <g font-size="15" font-family="sans-serif" fill="#e76f51" stroke="none">
                      <text x="10" y="20" dx="0">BAKGRUNNSHISTORIE</text>
                      <text x="515" y="20" dx="0">NØYTRAL</text>
                      <text x="1000" y="20" dx="0">RETT PÅ SAK</text>
                    </g>
            </svg>
          </div>
      
          <script>
            //Funksjon for å plassere navn på SVG-demo. Trenger en tall-verdi (value), en farge (color) og element-id til SVG (svgID)
            function drawSvgText(value, color, svgID, name) {
                const svg = document.getElementById(svgID); //Setter SVG-element basert på svgID
                const svgns = "http://www.w3.org/2000/svg"; //
                let xVal = (parseInt(value) * 10) + 50; //Ganger verdien med 10 for å tegne inn i SVG-elementet som er 1000px bredt
                //Sjekker om verdien er høyere eller lavere enn 500 for å få øke avstanden mellom punktene, samt sette den totale høyden på SVG-elementet
                if (xVal < 500) {
                    svgHeightLeft = svgHeightLeft + 50; //Legger til 35 px til venstre-side
                    svgYvalue = svgHeightLeft; //Setter Y-verdi til den oppdaterte venstre-side verdien
                } else {
                    svgHeightRight = svgHeightRight + 50; //Legger til 35 px til høyre-side
                    svgYvalue = svgHeightRight; //Setter Y-verdu til den oppdaterte høyre-side verdien
                }
                //Sjekker om verdien er 0 eller 1000. Legger til eller trekker fra 50px for å unngå at punktene kommer helt ut i kanten på SVG-elementet
                //if(xVal == 0) { xVal = xVal + 50; } //Verdien er 0 og det legges til 50px
                //if(xVal == 1000) { xVal = xVal - 50; } //Verdien er 1000, og det trekkes fra 50px
                let txtName = document.createElementNS(svgns, 'text'); //Oppretter variabel for å vise navn som SVG
                txtName.setAttributeNS(null, 'x', xVal); //Setter x-verdi for navn-objektet
                txtName.setAttributeNS(null, 'y', svgYvalue); //Setter y-verdi for navn-objektet
                txtName.setAttributeNS(null, 'class', 'svg-text svg-animation'); //Knytter css-klassen svg-text til navn-objektet
                txtName.textContent = name; //Setter verdien på tekst-elementet, herunder variablenen "name"
                let circle = document.createElementNS(svgns, "circle"); //Oppretter variabel for å vise en sirkel i SVG-elementet
                circle.setAttributeNS(null, 'cx', xVal); //Setter x-verdi
                circle.setAttributeNS(null, 'cy', svgYvalue); //Setter y-verdi
                circle.setAttributeNS(null, 'r', 25); //Setter radius på sirkelen
                circle.setAttributeNS(null, 'style', 'fill: ' + color); //Setter farge på sirkelen
                circle.setAttributeNS(null, 'class', 'svg-animation svg-shadow');
                let txtValue = document.createElementNS(svgns, 'text');
                txtValue.setAttributeNS(null, 'x', xVal);
                txtValue.setAttributeNS(null, 'y', svgYvalue + 15);
                txtValue.setAttributeNS(null, 'class', 'svg-num svg-animation');
                txtValue.textContent = value;
                //Legger til sirkelen til svg-elementet
                svg.appendChild(circle);
                svg.appendChild(txtName);
                svg.appendChild(txtValue);
            }
            svgYvalue = 0; //Totalhøyde på SVG-elementet
            svgHeightLeft = 25; //Høyde på venstre-side i SVG-elementet
            svgHeightRight = 25; //Høyde på høyre-side i SVG-elementet
            //Legger alle URLene til filene inn i et array (urls)
            let urls = [
            ]
             //Sjekker om noen har fylt ut profil-siden og det ligger data i local storage.
            console.log(localStorage.bacitUrl)
            if (localStorage.bacitUrl) {
                console.log(localStorage.bacitUrl)
                urls.push(localStorage.bacitUrl); //Legger til URL til urls array ved å bruke funksjonen push()
            }
            //Legger alle URLer i en promise.all funksjon
            Promise.all(urls.map(url => fetch(url).then(response => response.json()))).then((data) => {
                //Henter ut data for hver enkelt person i en egen variabel/array for å gjøre oversikten i koden bedre. Hadde det vært et dynamisk system så hadde ikke dette vært nødvendig/mulig
                for (var url in urls) {
                    drawSvgText(20, "#FFFFFF", "hours-svg", data[0].name);
                    drawSvgText(20, "#FFFFFF", "akt-svg", data[0].trxid);
                }
                //Sjekker om det er lagret noe i local storage, og skriver eventuelt ut en melding til <p>-elementet med ID "localstorage-tekst" hvor fornavn og etternavn blir synlig.
                if (localStorage.trxid) {
                    document.getElementById("localstorage-tekst").innerHTML = "Takk for at du fylte ut din profil <b>" + data[8].fname + " " + data[8].lname + "</b>. Nedefor kan du se hvordan du passer inn i gruppen:";
                }
                
                //Bruker funksjonen drawSvgText til å generere svg-elementene til hours-svg
                //Sjekker hvilken side som er høyest, og bruker deretter den høyeste til å sette "height" på SVG-elementet hours-svg
                if (svgHeightRight < svgHeightLeft) {
                    svgYvalue = svgHeightLeft; //Venstre side er høyest
                } else {
                    svgYvalue = svgHeightRight; //Høyre side er høyest
                }
                //Endrer høyden på SVG-elementet
                document.getElementById('hours-svg').setAttribute("height", svgYvalue + 140);
                //Akt
                svgYvalue = 0;
                svgHeightLeft = 25;
                svgHeightRight = 25;

                if (localStorage.trxid) {
                    drawSvgText(data[8].akt, "#e36256", "akt-svg", data[8].fname);
                }
                if (svgHeightRight < svgHeightLeft) {
                    svgYvalue = svgHeightLeft;
                } else {
                    svgYvalue = svgHeightRight;
                }
                document.getElementById('akt-svg').setAttribute("height", svgYvalue + 140);
                //Work
                svgYvalue = 0;
                svgHeightLeft = 25;
                svgHeightRight = 25;

                if (localStorage.trxid) {
                    drawSvgText(data[8].work, "#e36256", "work-svg", data[8].fname);
                }
                if (svgHeightRight < svgHeightLeft) {
                    svgYvalue = svgHeightLeft;
                } else {
                    svgYvalue = svgHeightRight;
                }
                document.getElementById('work-svg').setAttribute("height", svgYvalue + 40);
                //Dify
                svgYvalue = 0;
                svgHeightLeft = 25;
                svgHeightRight = 25;

                if (localStorage.trxid) {
                    drawSvgText(data[8].dify, "#e36256", "dify-svg", data[8].fname);
                }
                if (svgHeightRight < svgHeightLeft) {
                    svgYvalue = svgHeightLeft;
                } else {
                    svgYvalue = svgHeightRight;
                }
                document.getElementById('dify-svg').setAttribute("height", svgYvalue + 40);
                //Bgrp
                svgYvalue = 0;
                svgHeightLeft = 25;
                svgHeightRight = 25;

                if (localStorage.trxid) {
                    drawSvgText(data[8].bgrp, "#e36256", "bgrp-svg", data[8].fname);
                }
                if (svgHeightRight < svgHeightLeft) {
                    svgYvalue = svgHeightLeft;
                } else {
                    svgYvalue = svgHeightRight;
                }
                document.getElementById('bgrp-svg').setAttribute("height", svgYvalue + 40);
              });
              // just an alert message for when users try to use the search bar
              function OnlyAPlaceHolder() {
                  alert("this item doesn't have much functionality yet and is only a placeholder")
              }
          </script>
    </body>
</html>